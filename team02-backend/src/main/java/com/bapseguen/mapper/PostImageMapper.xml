<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="postImage">

	<!-- 파일 추가 -->
	<insert id="insert"
		parameterType="PostImageDTO">
		INSERT INTO TBL_POST_IMAGE (
		POST_IMAGE_NUMBER,
		POST_IMAGE_SYSTEM_NAME,
		POST_IMAGE_ORIGINAL_NAME,
		POST_NUMBER
		) VALUES (
		SEQ_POST_IMAGE_NUMBER.NEXTVAL,
		#{postImageSystemName},
		#{postImageOriginalName},
		#{postNumber}
		)
	</insert>
	<!-- 파일 조회 -->
	<select id="select" parameterType="int"
		resultType="PostImageDTO">
		SELECT
		POST_IMAGE_NUMBER AS postImageNumber,
		POST_IMAGE_SYSTEM_NAME AS postImageSystemName,
		POST_IMAGE_ORIGINAL_NAME AS postImageOriginalName,
		POST_NUMBER AS postNumber
		FROM TBL_POST_IMAGE
		WHERE POST_NUMBER = #{postNumber}
	</select>
	<!-- 파일 삭제 -->
	<delete id="delete" parameterType="int">
		DELETE FROM TBL_POST_IMAGE
		WHERE POST_NUMBER = #{postNumber}
	</delete>
	
	
	<!-- 공지사항 관리자 이미지 추가 -->
    <insert id="noticeimginsert" parameterType="AdminImageDTO">
        INSERT INTO TBL_ADMIN_IMAGE (
            ADMIN_IMAGE_NUMBER,
            ADMIN_IMAGE_SYSTEM_NAME,
            ADMIN_IMAGE_ORIGINAL_NAME,
            ADMIN_NUMBER,
            POST_NUMBER
        ) VALUES (
            SEQ_ADMIN_IMAGE_NUMBER.NEXTVAL,
            #{adminImageSystemName},
            #{adminImageOriginalName},
            #{adminNumber},
            #{postNumber}
        )
    </insert>
    <!-- 공지사항 관리자 이미지 조회 (POST 기준) -->
    <select id="noticeimgselect" parameterType="int" resultType="AdminImageDTO">
        SELECT
            ADMIN_IMAGE_NUMBER AS adminImageNumber,
            ADMIN_IMAGE_SYSTEM_NAME AS adminImageSystemName,
            ADMIN_IMAGE_ORIGINAL_NAME AS adminImageOriginalName,
            ADMIN_NUMBER AS adminNumber,
            POST_NUMBER AS postNumber
        FROM TBL_ADMIN_IMAGE
        WHERE POST_NUMBER = #{postNumber}
    </select>
	<!-- 공지사항 관리자 이미지 삭제 (POST 기준) -->
    <delete id="noticeimgdelete" parameterType="int">
        DELETE FROM TBL_ADMIN_IMAGE
        WHERE POST_NUMBER = #{postNumber}
    </delete>

</mapper>
