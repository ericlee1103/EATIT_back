<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="myStoreFavorite">
	<!-- 내 가게 찜 목록 조회 -->
	<select id="selectMyFavorites" resultType="FavoriteDTO" parameterType="map">
	<![CDATA[
	  SELECT * FROM (
	    SELECT ROWNUM AS RNUM, SUBQUERY.*
	    FROM (SELECT F.FAVORITE_NUMBER,F.MEMBER_NUMBER,F.BUSINESS_NUMBER,B.BUSINESS_NAME,B.BUSINESS_CATEGORY,B.BUSINESS_IMAGE
	      FROM TBL_FAVORITE F JOIN TBL_BUSINESS B 
	      ON F.BUSINESS_NUMBER = B.BUSINESS_NUMBER
	      WHERE F.MEMBER_NUMBER = #{memberNumber}
	      ORDER BY F.FAVORITE_NUMBER DESC
	    ) SUBQUERY
	  )WHERE RNUM BETWEEN #{startRow} AND #{endRow}
	]]>
	</select>

	<!-- 찜해제  -->
	<delete id="delete" parameterType="StoreFavoriteDTO">
	  DELETE FROM TBL_StoreFAVORITE
	  WHERE MEMBER_NUMBER = #{memberNumber}
	    AND BUSINESS_NUMBER = #{businessNumber}
	</delete>

</mapper>